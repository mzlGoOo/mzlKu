<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script>
			var xhr=new XMLHttpRequest();
			xhr.open("GET","new_file.json",true);
			xhr.send();
			xhr.onreadystatechange=function(){
				if(xhr.readyState==4){
					var jsonStr=xhr.responseText;
					var obj=JSON.parse(jsonStr);
					var person=obj.result.list;
					for (var i=0;i<person.length;i++) {
						document.write("姓名："+person[i].name+"性别："+person[i].sex+"年龄："+person[i].age+"<br />")
					}
				}
			}
			
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
			var xhr=new XMLHttpRequest();
//			    method：请求的类型；GET 或 POST
//			    url：文件在服务器上的位置
//			    async：true（异步）或 false（同步）
				xhr.open("GET","new_file.json",true);
				xhr.send();
				xhr.onreadystatechange=function(){
//					readyState状态变更事件
					if(xhr.readyState==4){
						//这里规定了得到的是Json的字符串
						var jsonStr=xhr.responseText;
						//这里规定了得到的是Json的json的对象
						var obj=JSON.parse(jsonStr);
						//这里列出出来了Json的分块内容
						var person=obj.result.list;
						for (var i=0;i<person.length;i++) {
							document.write("姓名："+person[i].name+"年龄："+person[i].age+"性别："+person[i].sex+"<br>");
						}
					}
				}
		</script>
	</head>
	<body>
	</body>
</html>

<!--****解释-->
	<!--// 1.客户端与服务器如何交互？B/S  C/S 
	// http  超文本传输协议  
	// https

	// ajax 和服务器进行交互 XMLHttpRequest对象
	// Request 请求
	// Response 响应

	// 0 创建xhr对象
	var xhr = new XMLHttpRequest();
	console.log(xhr);

	// 1 初始化 请求
	// xhr.open(get/post,url,是否异步默认为true)
	xhr.open("get","ajaxTest.json",true);
//		GET 还是 POST？
//		  与 POST 相比，GET 更简单也更快，并且在大部分情况下都能用。
//		  然而，在以下情况中，请使用 POST 请求：
//		  无法使用缓存文件（更新服务器上的文件或数据库）
//		  向服务器发送大量数据（POST 没有数据量限制）
//		  发送包含未知字符的用户输入时，POST 比 GET 更稳定也更可靠
	// 2.发送
	xhr.send();
	// 监听函数 
	xhr.onreadystatechange = function(){
		console.log( xhr.readyState );
		if (xhr.readyState == 4) {
			// 得到的响应是json格式的字符串
			var jsonStr = xhr.responseText;
			console.log(jsonStr);
			// 将json解析成字面对象
//			JSON.parse() 方法将一个 字符串解析成一个 JSON 对象。在解析过程中，还可以选择性的修改某些属性的原始解析值。
			var obj = JSON.parse(jsonStr);
			console.log(obj);
//			.result显示最后一次点击事件返回的结果;
			var personArr = obj.result.list;
			console.log(personArr);
			for (var i = 0; i < personArr.length; i++){
				document.write("姓名："+personArr[i].name+"年龄："+personArr[i].age+"性别："+personArr[i].sex+"<br/>");
			}
		}
	}-->
